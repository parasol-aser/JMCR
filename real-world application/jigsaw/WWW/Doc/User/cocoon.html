<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" 
   "http://www.w3.org/TR/REC-html40/loose.dtd"> 
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../style/doc.css"> 
    <title>Cocoon on Jigsaw</title>
  </head>
  <body bgcolor="#FFFFFF">
    <div class="icons-w3c">
      <a href="../../../">
	<img src="/Icons/w3c_home" 
	  border="0" 
	  alt="W3C logo"
	  height="48" 
	  width="72"></a>
    </div>
    <div class="icons-jigsaw">
      <a href="../../">
	<img src="/Icons/jigsaw" 
	  border="0"
	  alt="Jigsaw"
	  height="49"
	  width="212"></a>
    </div>

    <div class="title">
      <H1 class="title">
	Cocoon and Jigsaw<br>
	<span class="subtitle">Installing cocoon on Jigsaw</span>
      </H1>
      <hr NOSHADE width="70%" align="left">
      <a href="../../Overview.html">Jigsaw Home</a> /
      <a href="../Overview.html">Documentation Overview</a> /
      <a href="Tutorials.html">Tutorials</a>
    </div>

    <div class="left">
      <p class="link"><span class="linktitle">This Page</span><br>
	<a class="local" href="#download">Download</a><br>
	<a class="local" href="#clp">CLASSPATH</a><br>
	<a class="local" href="#servlet">Servlet.properties</a><br>
	<a class="local" href="#mapping">Xml mapping</a><br>
	<a class="local" href="#doc">Documentation</a><br>
      <p class="link"><span class="linktitle">Jigsaw Links</span><br>
	<a class="local" href="JigAdmin/Overview.html">JigAdmin</a><br>
	<a class="local" href="servlets.html">Servlet Tutorial</a><br>
	<a class="local" href="jsp.html">JSP Configuration</a><br>
	<a class="local" href="indexers.html">Indexers</a><br>
      <p class="link"><span class="linktitle">W3C Links</span><br>
	<a class="local" href="/XML/">XML</a><br>
	<a class="local" href="/Style/XSL/">XSL</a><br>
      <p class="link"><span class="linktitle">Cocoon Links</span><br>
	<a class="local"
	  href="http://xml.apache.org/cocoon/index.html">Cocoon Site</a><br> 
	<a class="local"
	  href="http://xml.apache.org/cocoon/dist/">Download Cocoon</a><br> 
	<a class="local"
	  href="http://xml.apache.org/cocoon/guide.html">User Guide</a><br> 
    </div>

    <div class="body">
      <h1>Installing cocoon on Jigsaw</h1>
      <dl>
	<a name="download"></a>
	<dt><span class="dtl">Download Cocoon</span></dt>
	<dd>Jigsaw has been tested with <a
	    href="http://xml.apache.org/cocoon/dist/">Cocoon 1.8</a>.
	  <p>Cocoon is a servlet, so we only have to install it
	    and configure Jigsaw to "associate" all xml documents to
	    that servlet.
	</dd>
	<a name="clp"></a>
	<dt><span class="dtl">Update your CLASSPATH variable:</span></dt>
	<dd>
	  <div class="code">
	    <pre>
CLASSPATH=$CLASSPATH:\
          [cocoon-home]/lib/xerces.jar:\
          [cocoon-home]/lib/stylebook.jar:\
          [cocoon-home]/lib/fop.jar:\
          [cocoon-home]/bin/cocoon.jar:\
          [cocoon-home]/lib/xalan.jar:\
          [cocoon-home]/lib/turbine-pool.jar</pre></div>
	</dd>
	<a name="servlet"></a>
	<dt><span class="dtl">Edit servlet.properties</span></dt>
	<dd>In <code>[jigsaw-home]/Jigsaw/Jigsaw/config/servlet.properties</code> 
	  Add the lines:
	  <div class="code">
	    <pre>
#COCOON
servlet.cocoon.code=org.apache.cocoon.Cocoon
servlet.cocoon.description=The Cocoon Servlet
servlet.cocoon.initArgs=properties=[cocoon-home]/conf/cocoon.properties
servlet.cocoon.icon=burst.gif
</pre></div>
	</dd> 
	<a name="mapping"></a>
	<dt><span class="dtl">Configure xml mapping</span></dt>
	<dd>
	  Ok, it's time to restart Jigsaw with the new
	  configuration. Now we need to "map" all xml documents to the 
	  Cocoon servlet, for that we use a <a
	    href="../Reference/org.w3c.jigsaw.servlet.ServletMapperFrame.html">ServletMapperFrame</a> exactly  like we do for <a href="jsp.html">jsp configuration</a>.
	  <p>
	    So, setup the <a href="indexers.html">indexer</a> with
	    <a href="JigAdmin/Overview.html">JigAdmin</a> (eg:
	    <b>cocoon-indexer</b>). Under the "extensions" node add
	    the "<b>xml</b>" extension using a FileResource associated
	    to a ServletMapperFrame. Then, in the ServletMapperFrame,
	    set the "<b>servlet-url</b>" field to the Cocoon Servlet
	    URI (eg: <b>/servlet/cocoon</b>).
	  <p>
	    <img src="images/cocooncfg.gif" width="499" height="412"
	         alt="XML Mapping configuration" border="0">
	  <p>Note: don't forget to associate the <b>cocoon-indexer</b>
	    to the top level directory resource of your cocoon space.
	</dd>
	<a name="doc"></a>
	<dt><span class="dtl">Read the documentation!</span></dt>
	<dd>
	  <a href="http://xml.apache.org/cocoon/guide.html">Cocoon
	    User Guide</a>
	</dd>
      </dl>
    </div> <!-- body -->
    <div class="footer">
      <p>
      <hr NOSHADE WIDTH="100%">
      <a href="mailto:jigsaw@w3.org">Jigsaw Team</a><br>
      <span class="mini">
      $Id: cocoon.html,v 1.1 2010/06/15 12:22:57 smhuang Exp $
    </span>
    <p class="policyfooter">
      <font size=-1>
	<a href="/Consortium/Legal/ipr-notice.html#Copyright">Copyright</a>
	&copy; 1999 <a href="http://www.w3.org">W3C</a> 
	(<a href="http://www.lcs.mit.edu">MIT</a>, 
	<a href="http://www.inria.fr/">INRIA</a>, 
	<a href="http://www.keio.ac.jp/">Keio</a> ), 
	All Rights Reserved. W3C 
	<a href="/Consortium/Legal/ipr-notice.html#Legal Disclaimer">
	  liability,
	</a>
	<a href="/Consortium/Legal/ipr-notice.html#W3C Trademarks">
	  trademark
	</a>, 
	<a href="/Consortium/Legal/copyright-documents.html">
	  document use 
	</a>
	and
	<a href="/Consortium/Legal/copyright-software.html">
	  software licensing
	</a> rules apply. Your interactions with this site are in
	accordance with our 
	<a href="/Consortium/Legal/privacy-statement.html#Public">
	  public
	</a> and 
	<a href="/Consortium/Legal/privacy-statement.html#Members">
	  Member
	</a>
	privacy statements.</font>
    </div>
  </body>
</html>

